<%- include('partials/header') %>

<div class="container mt-4">
  <h1><%= title %></h1>
  
  <form method="POST" action="/recipes/search" class="mb-4">
    <div class="form-group">
      <label for="about">Tell us what you're looking for:</label>
      <textarea class="form-control" id="about" name="about" rows="3" placeholder="E.g. I want vegetarian pasta recipes without tomatoes, or I love spicy Asian food with chicken"><%= locals.about || '' %></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Get Recommendations</button>
  </form>

  <% if (locals.ai_enabled && locals.aiExplanation) { %>
    <div class="alert alert-info">
      <strong>AI Assistant:</strong> <%= aiExplanation %>
    </div>
  <% } %>
  
  <% if (locals.recommendations && recommendations.length > 0) { %>
    <h2>Recipe Recommendations</h2>
    <div class="row">
      <% recommendations.forEach(recipe => { %>
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title"><%= recipe.title %></h5>
              <p class="card-text"><%= recipe.description %></p>
              <p class="text-muted"><small>Cuisine: <%= recipe.cuisine || 'Not specified' %></small></p>
              <a href="/recipes/<%= recipe.id %>" class="btn btn-sm btn-primary">View Recipe</a>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } else if (locals.about) { %>
    <div class="alert alert-warning">
      No recipes match your preferences. Try adjusting your requirements.
    </div>
  <% } %>
</div>

<%- include('partials/footer') %>